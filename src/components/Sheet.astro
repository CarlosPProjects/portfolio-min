---
import { nav } from "@/db/data";
import { Icon } from "astro-icon/components";
---

<div
  class="absolute bg-black/10 left-0 top-0 right-0 bottom-0 opacity-0 -z-10 w-full min-h-screen transition-all duration-500 __menuContainer overflow-hidden"
>
  <div
    class="w-[320px] min-h-screen bg-white absolute top-0 right-0 translate-x-full flex flex-col px-8 py-4 opacity-0 transition-all duration-500 z-20 __sheet"
  >
    <Icon name="close-svgrepo-com" size={20} class="absolute top-4 right-4 cursor-pointer __toggleButton" />
    <ul class="flex-1 flex flex-col gap-6 mt-10">
      {
        nav.map((item) => (
          <li class="text-xl font-medium">
            <a class="__toggleButton" href={item.url}>{item.name}</a>
          </li>
        ))
      }
    </ul>

    <div>
      <p class="text-sm opacity-70 text-center">Carlos G.</p>
    </div>
  </div>
</div>
<script>
  const body = document.body;
  const toggleButton = document.querySelectorAll(".__toggleButton");
  const menuContainer = document.querySelector(".__menuContainer");
  const sheet = document.querySelector(".__sheet");

  function toggleMenu() {
    menuContainer?.classList.toggle("active");
    sheet?.classList.toggle("active");
    body.classList.toggle("no-scroll");
  }

  toggleButton.forEach((element) => {
    element.addEventListener("click", toggleMenu);
  });

  menuContainer?.addEventListener("click", (event) => {
    if (event.target === menuContainer) {
      toggleMenu();
    }
  });
</script>
